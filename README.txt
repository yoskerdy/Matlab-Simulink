Here are several Matlab files. They all works with the simulink file "Rocket2_xy.slx" and correspond to the blocks you could find into the project.

You can also find a video of the simulation.

The rocket has a progressive thrust and mass consumption. The algorithm uses a sliding method based on a speed function that depends on the altitude.